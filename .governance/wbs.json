{
  "metadata": {
    "project_name": "Agent Teams Starter Kit \u2014 Full Upgrade",
    "approved_by": "human",
    "approved_at": "2025-02-12T00:00:00"
  },
  "work_areas": [
    {
      "id": "1.0",
      "title": "Kickoff & Onboarding",
      "description": "Help users actually start using Agent Teams"
    },
    {
      "id": "2.0",
      "title": "WBS Templates",
      "description": "Ready-to-use project patterns for common use cases"
    },
    {
      "id": "3.0",
      "title": "Skills Expansion",
      "description": "Additional skills for common agent operations"
    },
    {
      "id": "4.0",
      "title": "Documentation & Playbooks",
      "description": "Guides for team patterns, error recovery, best practices"
    },
    {
      "id": "5.0",
      "title": "Observability & Polish",
      "description": "Monitoring, CLI improvements, final polish"
    },
    {
      "id": "6.0",
      "title": "AI-Optimized Template Substrate",
      "description": "Deliver a production-ready, AI-native web app skeleton with strict type and policy guardrails."
    },
    {
      "id": "7.0",
      "title": "AI Substrate Delivery Enhancements",
      "description": "Improve drop-in readiness with onboarding guidance, automated context maintenance, artifact publishing, and contract changelog."
    },
    {
      "id": "8.0",
      "title": "Documentation Viewer Expansion",
      "description": "Expand WBS viewer into a full project documentation viewer with searchable docs and richer previews."
    },
    {
      "id": "9.0",
      "title": "Governance Hardening",
      "description": "Harden governance control-plane guarantees: canonical status model, strict validation, cross-platform locking, tamper-evident logs, and boundary enforcement."
    },
    {
      "id": "10.0",
      "title": "Session Continuity & Guided Planning",
      "description": "Implement briefing, handover continuity, guided planning, and capability profiles with schema/version contracts and evidence-driven validation."
    },
    {
      "id": "11.0",
      "title": "Git-Native Governance",
      "description": "Elevate Git from passive storage to active governance ledger with commit-linked lifecycle transitions, deterministic traceability, and CI enforcement."
    }
  ],
  "packets": [
    {
      "id": "UPG-001",
      "wbs_ref": "1.1",
      "area_id": "1.0",
      "title": "Create lead agent kickoff prompt",
      "scope": "Write prompts/kickoff-lead.md \u2014 example prompt for starting a lead agent session. Include: how to reference CLAUDE.md, how to init WBS, how to spawn teammates. Make it copy-pasteable."
    },
    {
      "id": "UPG-002",
      "wbs_ref": "1.2",
      "area_id": "1.0",
      "title": "Create teammate kickoff prompt",
      "scope": "Write prompts/kickoff-teammate.md \u2014 example prompt the lead uses to spawn a specialist. Include: how to pass context, which skills to use, how to report back."
    },
    {
      "id": "UPG-003",
      "wbs_ref": "1.3",
      "area_id": "1.0",
      "title": "Create 2-minute quickstart guide",
      "scope": "Write prompts/QUICKSTART.md \u2014 absolute minimum steps to go from clone to working Agent Team. Target: under 2 minutes to first claimed packet."
    },
    {
      "id": "UPG-004",
      "wbs_ref": "2.1",
      "area_id": "2.0",
      "title": "Create feature development WBS template",
      "scope": "Write templates/wbs-feature.json \u2014 standard pattern for building a new feature. Phases: requirements, design, implement, test, document. 8-12 packets."
    },
    {
      "id": "UPG-005",
      "wbs_ref": "2.2",
      "area_id": "2.0",
      "title": "Create migration WBS template",
      "scope": "Write templates/wbs-migration.json \u2014 pattern for migrating systems/code. Phases: audit, plan, execute incrementally, validate, cutover. Include rollback considerations."
    },
    {
      "id": "UPG-006",
      "wbs_ref": "2.3",
      "area_id": "2.0",
      "title": "Create refactor WBS template",
      "scope": "Write templates/wbs-refactor.json \u2014 pattern for systematic refactoring. Phases: identify scope, add tests, refactor incrementally, validate. Emphasis on not breaking things."
    },
    {
      "id": "UPG-007",
      "wbs_ref": "2.4",
      "area_id": "2.0",
      "title": "Create bug campaign WBS template",
      "scope": "Write templates/wbs-bugfix.json \u2014 pattern for tackling multiple bugs systematically. Phases: triage, reproduce, fix, verify. Good for 'fix all the linter errors' type work."
    },
    {
      "id": "UPG-008",
      "wbs_ref": "3.1",
      "area_id": "3.0",
      "title": "Create code review skill",
      "scope": "Write .claude/skills/review-code/SKILL.md \u2014 skill for reviewing code changes. Include: what to look for, how to report findings, severity levels. Should work with git diff."
    },
    {
      "id": "UPG-009",
      "wbs_ref": "3.2",
      "area_id": "3.0",
      "title": "Create test runner skill",
      "scope": "Write .claude/skills/run-tests/SKILL.md \u2014 skill for running tests and interpreting results. Handle: pytest, jest, go test. Report pass/fail clearly."
    },
    {
      "id": "UPG-010",
      "wbs_ref": "3.3",
      "area_id": "3.0",
      "title": "Create PR skill",
      "scope": "Write .claude/skills/create-pr/SKILL.md \u2014 skill for creating pull requests. Include: title conventions, description template, linking to WBS packets."
    },
    {
      "id": "UPG-011",
      "wbs_ref": "3.4",
      "area_id": "3.0",
      "title": "Create research/explore skill",
      "scope": "Write .claude/skills/explore/SKILL.md \u2014 skill for exploring unfamiliar codebases. Include: how to summarize findings, what to document, how to report back to lead."
    },
    {
      "id": "UPG-012",
      "wbs_ref": "3.5",
      "area_id": "3.0",
      "title": "Create WBS report skill",
      "scope": "Write .claude/skills/wbs-report/SKILL.md \u2014 skill for generating markdown summary of project status. Include: progress stats, completed work, blockers, next steps."
    },
    {
      "id": "UPG-013",
      "wbs_ref": "4.1",
      "area_id": "4.0",
      "title": "Write team patterns guide",
      "scope": "Write docs/TEAM_PATTERNS.md \u2014 document common team structures: lead + specialists, parallel workers, pipeline. When to use each. How many agents for different project sizes."
    },
    {
      "id": "UPG-014",
      "wbs_ref": "4.2",
      "area_id": "4.0",
      "title": "Write error recovery playbook",
      "scope": "Write docs/PLAYBOOK.md \u2014 what to do when things go wrong. Scenarios: agent stuck, wrong work done, dependency failed, need to restart. Step-by-step recovery procedures."
    },
    {
      "id": "UPG-015",
      "wbs_ref": "4.3",
      "area_id": "4.0",
      "title": "Write WBS design guide",
      "scope": "Write docs/DESIGNING_WBS.md \u2014 how to break down a project into good packets. Sizing guidance, dependency patterns to avoid, common mistakes."
    },
    {
      "id": "UPG-016",
      "wbs_ref": "5.1",
      "area_id": "5.0",
      "title": "Add colored CLI output",
      "scope": "Update .governance/wbs_cli.py to use ANSI colors. Green for success, red for errors, yellow for warnings, blue for info. Detect if terminal supports colors."
    },
    {
      "id": "UPG-017",
      "wbs_ref": "5.2",
      "area_id": "5.0",
      "title": "Add dashboard auto-refresh",
      "scope": "Update .governance/static/index.html to auto-refresh every 5 seconds (already has setInterval, verify it works). Add visual indicator showing last refresh time."
    },
    {
      "id": "UPG-018",
      "wbs_ref": "5.3",
      "area_id": "5.0",
      "title": "Add GitHub Actions CI",
      "scope": "Create .github/workflows/test.yml \u2014 run test.sh on push and PR. Add badge to README. Simple workflow, just validates the system works."
    },
    {
      "id": "UPG-019",
      "wbs_ref": "5.4",
      "area_id": "5.0",
      "title": "Add README badges and screenshot",
      "scope": "Update README.md with badges (license, CI, Python version). Add screenshot or GIF of dashboard. Make it visually appealing at first glance."
    },
    {
      "id": "UPG-020",
      "wbs_ref": "5.5",
      "area_id": "5.0",
      "title": "Final review and cleanup",
      "scope": "Review all new files for consistency. Update README if needed. Ensure .meta/ is documented as 'delete before publishing'. Run full test suite. Tag as v1.0."
    },
    {
      "id": "UPG-021",
      "wbs_ref": "6.1",
      "area_id": "6.0",
      "title": "Pin framework baseline and runtime policy",
      "scope": "Define Next.js 16 baseline with pinned patch policy, server/client boundary rules, caching strategy defaults, and runtime targets. Output: architecture decision doc and enforced config updates in template defaults."
    },
    {
      "id": "UPG-022",
      "wbs_ref": "6.2",
      "area_id": "6.0",
      "title": "Design data layer: Prisma default with adapter seam",
      "scope": "Define PostgreSQL + Supabase integration pattern with Prisma as default ORM, documented Drizzle swap seam, and canonical connection strategy. Output: data-layer ADR and starter implementation contract."
    },
    {
      "id": "UPG-023",
      "wbs_ref": "6.3",
      "area_id": "6.0",
      "title": "Define authorization model: RLS-first plus app policy",
      "scope": "Establish authorization contract with Postgres RLS as enforcement source of truth and app-layer policy checks for UX capability gating. Output: auth architecture spec and starter policy module interface."
    },
    {
      "id": "UPG-024",
      "wbs_ref": "6.4",
      "area_id": "6.0",
      "title": "Implement substrate scaffold package",
      "scope": "Build scaffold baseline for Next.js App Router, Tailwind, shadcn/ui primitives, Zod validation, and strict TypeScript defaults. Output: runnable template skeleton with seed pages and examples."
    },
    {
      "id": "UPG-025",
      "wbs_ref": "6.5",
      "area_id": "6.0",
      "title": "Create typed context artifacts for AI agents",
      "scope": "Produce canonical context bundle including schema.prisma conventions, Zod contract layout, env schema, and agent-facing context index. Output: docs and starter files that minimize model ambiguity."
    },
    {
      "id": "UPG-026",
      "wbs_ref": "6.6",
      "area_id": "6.0",
      "title": "Add quality gates and AI guardrails",
      "scope": "Add CI checks and local gates for typecheck, lint, test, schema validation, and policy drift detection. Output: repeatable verification pipeline and failure playbook references."
    },
    {
      "id": "UPG-027",
      "wbs_ref": "6.7",
      "area_id": "6.0",
      "title": "Build AI-task eval harness",
      "scope": "Implement scripted eval scenarios to measure one-shot success for CRUD, auth checks, and schema edits by AI agents. Output: eval scripts, scoring rubric, and baseline report format."
    },
    {
      "id": "UPG-028",
      "wbs_ref": "6.8",
      "area_id": "6.0",
      "title": "Write migration and adoption playbook",
      "scope": "Document migration path from existing templates to the new substrate, including decision criteria and rollback strategy. Output: adoption guide and phased rollout checklist."
    },
    {
      "id": "UPG-029",
      "wbs_ref": "6.9",
      "area_id": "6.0",
      "title": "Hardening review and release readiness",
      "scope": "Run end-to-end hardening pass for security, performance, and developer ergonomics; finalize release checklist. Output: release readiness report with residual risks and next actions."
    },
    {
      "id": "UPG-030",
      "wbs_ref": "7.1",
      "area_id": "7.0",
      "title": "Document onboarding bundle",
      "scope": "Produce docs/codex-migration/ai-substrate/onboarding.md that summarizes the drop-in workflow, key context files, preflight commands, and how agents should use the new scripts on day one."
    },
    {
      "id": "UPG-031",
      "wbs_ref": "7.2",
      "area_id": "7.0",
      "title": "Automate typed-context maintenance",
      "scope": "Create scripts/typed-context-refresh.js (optionally config) that regenerates docs/codex-migration/ai-substrate/typed-context-index.json from a canonical list, validates file paths, and timestamps the bundle for agents."
    },
    {
      "id": "UPG-032",
      "wbs_ref": "7.3",
      "area_id": "7.0",
      "title": "Publish evaluation artifacts",
      "scope": "Implement scripts/ai-eval-publish.js that copies reports/ai-substrate-eval.json into docs/codex-migration/ai-substrate/eval-history with timestamps and updates release-readiness references."
    },
    {
      "id": "UPG-033",
      "wbs_ref": "7.4",
      "area_id": "7.0",
      "title": "Add AI contract changelog",
      "scope": "Create docs/codex-migration/ai-substrate/contract-changelog.md plus scripts/contract-log-entry.sh to append structured entries for schema/env/policy changes so agents can track ontological shifts."
    },
    {
      "id": "UPG-034",
      "wbs_ref": "8.1",
      "area_id": "8.0",
      "title": "Add documentation catalog APIs",
      "scope": "Implement server APIs that enumerate project documentation and metadata (title/path/type/size), with safe repository-relative path enforcement and stable sorting for UI consumption.",
      "packet_id": "UPG-034",
      "wbs_refs": [
        "8.1"
      ],
      "purpose": "Provide a deterministic API layer that exposes project documentation inventory for the dashboard viewer.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [],
      "required_inputs": [
        ".governance/wbs_server.py",
        "docs/"
      ],
      "required_actions": [
        "Add endpoint(s) that return documentation index metadata with safe path validation",
        "Keep response shape stable for frontend consumption"
      ],
      "required_outputs": [
        ".governance/wbs_server.py"
      ],
      "validation_checks": [
        "Docs index API returns JSON with predictable ordering",
        "Path traversal attempts are rejected"
      ],
      "exit_criteria": [
        "API supports project-wide document enumeration for UI browsing"
      ],
      "halt_conditions": [
        "Endpoint exposes files outside repository root"
      ]
    },
    {
      "id": "UPG-035",
      "wbs_ref": "8.2",
      "area_id": "8.0",
      "title": "Build project documentation explorer UI",
      "scope": "Expand the dashboard viewer into a documentation explorer with project-wide docs listing, filter/search controls, and inline preview while preserving packet viewer details.",
      "packet_id": "UPG-035",
      "wbs_refs": [
        "8.2"
      ],
      "purpose": "Deliver a full-featured documentation browsing experience directly within the WBS dashboard.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-034 complete"
      ],
      "required_inputs": [
        ".governance/static/index.html",
        ".governance/wbs_server.py"
      ],
      "required_actions": [
        "Add project docs explorer UI with list/group/search/filter controls",
        "Support document preview and packet-linked document navigation"
      ],
      "required_outputs": [
        ".governance/static/index.html"
      ],
      "validation_checks": [
        "Docs explorer can open and preview files from API results",
        "Packet viewer still renders packet details and events"
      ],
      "exit_criteria": [
        "Dashboard acts as a project documentation viewer, not only a packet viewer"
      ],
      "halt_conditions": [
        "UI changes break existing claim/done lifecycle actions"
      ]
    },
    {
      "id": "UPG-036",
      "wbs_ref": "8.3",
      "area_id": "8.0",
      "title": "Integrate packet links and validate doc viewer flow",
      "scope": "Integrate packet-linked documents into the new docs explorer flow, verify API/UI behavior with targeted tests, and capture evidence in packet notes.",
      "packet_id": "UPG-036",
      "wbs_refs": [
        "8.3"
      ],
      "purpose": "Finalize integration and prove the documentation viewer flow works end-to-end.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-035 complete"
      ],
      "required_inputs": [
        ".governance/static/index.html",
        "tests/test_server_api.py"
      ],
      "required_actions": [
        "Connect packet-linked docs to the global docs explorer experience",
        "Add or run targeted tests and capture evidence"
      ],
      "required_outputs": [
        ".governance/static/index.html",
        "tests/test_server_api.py"
      ],
      "validation_checks": [
        "Targeted tests pass for docs API and integration behavior",
        "Packet-linked docs can be opened from viewer context"
      ],
      "exit_criteria": [
        "Integration path validated and evidence captured in lifecycle notes"
      ],
      "halt_conditions": [
        "Validation is skipped or inconclusive"
      ]
    },
    {
      "id": "UPG-037",
      "wbs_ref": "8.4",
      "area_id": "8.0",
      "title": "Add docs explorer UI regression coverage",
      "scope": "Add and run UI regression checks that exercise the new documentation explorer (open, search/filter, preview) and record report/log artifacts.",
      "packet_id": "UPG-037",
      "wbs_refs": [
        "8.4"
      ],
      "purpose": "Reduce residual frontend risk by adding executable UI checks for docs explorer behavior.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-036 complete"
      ],
      "required_inputs": [
        "skills/ui-regression/tests/critical.spec.ts",
        ".governance/static/index.html"
      ],
      "required_actions": [
        "Add UI checks for docs explorer open/search/preview flow",
        "Run ui-regression workflow and record evidence artifacts"
      ],
      "required_outputs": [
        "skills/ui-regression/tests/critical.spec.ts",
        "docs/codex-migration/skills/ui-regression-report.md",
        "docs/codex-migration/skills/ui-regression/playwright.log"
      ],
      "validation_checks": [
        "Playwright critical suite runs against the dashboard server",
        "Report/log artifacts are generated"
      ],
      "exit_criteria": [
        "Docs explorer UI regression coverage exists and is executable"
      ],
      "halt_conditions": [
        "UI coverage cannot run due missing runtime dependencies"
      ]
    },
    {
      "id": "UPG-038",
      "wbs_ref": "9.1",
      "area_id": "9.0",
      "title": "Define object model and status contract",
      "scope": "Document and formalize PacketDefinition vs RuntimeState vs LogEvent vs AreaCloseout, and define canonical status representation with explicit boundary normalization rules.",
      "packet_id": "UPG-038",
      "wbs_refs": [
        "9.1"
      ],
      "purpose": "Establish a single, explicit governance data model and status contract that all mutation/read paths must follow.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [],
      "required_inputs": [
        "docs/architecture.md",
        ".governance/packet-schema.json",
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py"
      ],
      "required_actions": [
        "Document object boundaries for PacketDefinition, RuntimeState, LogEvent, and AreaCloseout",
        "Define canonical status vocabulary and boundary normalization rules"
      ],
      "required_outputs": [
        "docs/architecture.md"
      ],
      "validation_checks": [
        "Architecture docs explicitly describe object model and status contract",
        "No contradictory status definitions remain in core governance docs"
      ],
      "exit_criteria": [
        "Object model and status contract are explicit, deterministic, and implementation-ready"
      ],
      "halt_conditions": [
        "Status semantics remain ambiguous across runtime and schema boundaries"
      ]
    },
    {
      "id": "UPG-039",
      "wbs_ref": "9.2",
      "area_id": "9.0",
      "title": "Implement status normalization layer",
      "scope": "Implement canonical runtime status handling and normalization at CLI/server/schema boundaries so status filtering, readiness checks, and packet validation are deterministic.",
      "packet_id": "UPG-039",
      "wbs_refs": [
        "9.2"
      ],
      "purpose": "Remove subtle casing/representation drift by centralizing status normalization logic.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-038 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        ".governance/wbs_server.py",
        "src/governed_platform/governance/engine.py",
        ".governance/packet-schema.json"
      ],
      "required_actions": [
        "Add normalization utilities for schema/runtime status boundaries",
        "Apply normalization consistently in CLI/server/engine status reads and writes"
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        ".governance/wbs_server.py",
        "src/governed_platform/governance/engine.py"
      ],
      "validation_checks": [
        "Status-based flows (ready/claim/done/filtering) behave consistently",
        "Validation paths report clear status expectations"
      ],
      "exit_criteria": [
        "Status handling is deterministic and casing-insensitive at boundaries"
      ],
      "halt_conditions": [
        "Normalization introduces backward-incompatible lifecycle regressions"
      ]
    },
    {
      "id": "UPG-040",
      "wbs_ref": "9.3",
      "area_id": "9.0",
      "title": "Add strict WBS schema validation",
      "scope": "Extend validation flows to enforce packet schema compliance on active WBS definitions (not only template checks), with explicit strict mode and actionable errors.",
      "packet_id": "UPG-040",
      "wbs_refs": [
        "9.3"
      ],
      "purpose": "Ensure active WBS definitions can be validated against canonical packet contracts before execution.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-038 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        ".governance/wbs.json",
        ".governance/packet-schema.json",
        "tests/"
      ],
      "required_actions": [
        "Add strict validation mode for active WBS packet objects",
        "Return actionable errors that identify packet and missing/invalid fields"
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "tests/"
      ],
      "validation_checks": [
        "Strict validation fails on malformed packet definitions",
        "Strict validation passes on compliant WBS files"
      ],
      "exit_criteria": [
        "Operators can run a single command to verify graph + packet contract integrity"
      ],
      "halt_conditions": [
        "Strict mode blocks valid legacy usage without migration path"
      ]
    },
    {
      "id": "UPG-041",
      "wbs_ref": "9.4",
      "area_id": "9.0",
      "title": "Implement cross-platform state locking",
      "scope": "Introduce cross-platform lock strategy for state/definition writes to reduce concurrent mutation races across Unix and Windows environments.",
      "packet_id": "UPG-041",
      "wbs_refs": [
        "9.4"
      ],
      "purpose": "Improve multi-writer safety by making state mutation locking explicit and cross-platform.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-038 complete"
      ],
      "required_inputs": [
        "src/governed_platform/governance/state_manager.py",
        ".governance/wbs_cli.py",
        ".governance/wbs_server.py"
      ],
      "required_actions": [
        "Implement cross-platform lock primitive for governance state mutation paths",
        "Apply lock strategy consistently across CLI/engine/server writes"
      ],
      "required_outputs": [
        "src/governed_platform/governance/state_manager.py",
        ".governance/wbs_cli.py",
        ".governance/wbs_server.py"
      ],
      "validation_checks": [
        "Concurrent write scenarios avoid torn/overwritten lifecycle state",
        "Lock behavior is deterministic on Linux and Windows environments"
      ],
      "exit_criteria": [
        "Mutation paths document and enforce a single-writer lock strategy"
      ],
      "halt_conditions": [
        "Lock implementation can deadlock or block routine single-user operations"
      ]
    },
    {
      "id": "UPG-042",
      "wbs_ref": "9.5",
      "area_id": "9.0",
      "title": "Add tamper-evident lifecycle log mode",
      "scope": "Add optional hash-chained lifecycle events (event_id/prev_hash/hash) and verification command so log tampering is detectable without requiring full PKI.",
      "packet_id": "UPG-042",
      "wbs_refs": [
        "9.5"
      ],
      "purpose": "Introduce lightweight tamper evidence for lifecycle history without high-friction cryptographic operations.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-041 complete"
      ],
      "required_inputs": [
        "src/governed_platform/governance/engine.py",
        "src/governed_platform/governance/state_manager.py",
        ".governance/wbs_cli.py"
      ],
      "required_actions": [
        "Add optional hash-chain fields for lifecycle events",
        "Provide verification command that reports chain integrity failures"
      ],
      "required_outputs": [
        "src/governed_platform/governance/engine.py",
        ".governance/wbs_cli.py",
        "docs/logging.md"
      ],
      "validation_checks": [
        "Verification command passes on untampered logs",
        "Verification command fails on modified historical entries"
      ],
      "exit_criteria": [
        "Tamper-evident mode is usable and documented with clear operator guidance"
      ],
      "halt_conditions": [
        "Hash-chain mode materially degrades standard lifecycle performance"
      ]
    },
    {
      "id": "UPG-043",
      "wbs_ref": "9.6",
      "area_id": "9.0",
      "title": "Enforce governance boundary in pre-commit/CI",
      "scope": "Add repository-level guardrails that detect/block direct edits to runtime governance state outside approved CLI paths, and document override protocol.",
      "packet_id": "UPG-043",
      "wbs_refs": [
        "9.6"
      ],
      "purpose": "Mechanically enforce the governance boundary so direct state edits are exception-only and auditable.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-040 complete"
      ],
      "required_inputs": [
        ".pre-commit-config.yaml",
        ".github/workflows/test.yml",
        "docs/governance-workflow-codex.md"
      ],
      "required_actions": [
        "Add pre-commit/CI checks that detect direct edits to governance runtime state",
        "Document controlled override procedure for emergency/manual corrections"
      ],
      "required_outputs": [
        ".pre-commit-config.yaml",
        ".github/workflows/test.yml",
        "docs/governance-workflow-codex.md"
      ],
      "validation_checks": [
        "Guardrails fail when runtime state is edited directly",
        "Normal CLI-driven workflows remain green"
      ],
      "exit_criteria": [
        "Governance boundary is enforced in repository automation, not only by convention"
      ],
      "halt_conditions": [
        "Guardrails are noisy enough to block routine development workflows"
      ]
    },
    {
      "id": "UPG-044",
      "wbs_ref": "10.1",
      "area_id": "10.0",
      "title": "Stabilize briefing and context output contracts",
      "scope": "Define versioned JSON/text schemas for briefing/context outputs, required fields, backward-compatibility rules, and size budget controls.",
      "packet_id": "UPG-044",
      "wbs_refs": [
        "10.1"
      ],
      "purpose": "Define stable versioned briefing/context contracts so session bootstrap and handover consumers can parse output deterministically.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "docs/architecture.md",
        "AGENTS.md"
      ],
      "required_actions": [
        "Define versioned JSON/text contract for briefing and context outputs (required keys, types, semantics).",
        "Specify compact and limit controls with defaults and max bounds for context safety.",
        "Document backward-compatibility and deprecation policy for output fields."
      ],
      "required_outputs": [
        "docs/architecture.md",
        "docs/codex-migration/briefing-context-schema.md",
        "docs/governance-workflow-codex.md"
      ],
      "validation_checks": [
        "Contract docs include example JSON payloads for briefing and context responses.",
        "CLI help/usage reflects documented flags and output modes.",
        "Documented fields can be parsed consistently by automated tests."
      ],
      "exit_criteria": [
        "Briefing/context output contracts are versioned, documented, and unambiguous.",
        "Size-control semantics are specified with deterministic truncation behavior."
      ],
      "halt_conditions": [
        "Output contract remains unspecified or non-versioned after implementation starts."
      ]
    },
    {
      "id": "UPG-045",
      "wbs_ref": "10.2",
      "area_id": "10.0",
      "title": "Implement briefing command and session bootstrap guidance",
      "scope": "Implement briefing command aggregating status, ready, blocked, active assignments, and recent log with format and compact options; update operator docs.",
      "packet_id": "UPG-045",
      "wbs_refs": [
        "10.2"
      ],
      "purpose": "Implement a first-action session briefing command that reduces startup ambiguity for new or resumed agent sessions.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-044 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "CLAUDE.md",
        "GEMINI.md",
        "AGENTS.md"
      ],
      "required_actions": [
        "Add briefing command with json/text modes and compact option using the contract defined in UPG-044.",
        "Aggregate status summary, ready packets, blocked packets with reasons, active assignments, and recent transitions.",
        "Update agent startup guidance to run briefing as first action in new sessions."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "tests/test_cli_briefing.py",
        "CLAUDE.md",
        "GEMINI.md",
        "AGENTS.md"
      ],
      "validation_checks": [
        "pytest -q tests/test_cli_briefing.py passes.",
        "Briefing JSON output includes version, counts, ready, blocked, active_assignments, and recent_events keys.",
        "Briefing command is read-only and does not mutate state."
      ],
      "exit_criteria": [
        "Operators can bootstrap a session with one command and predictable output.",
        "Agent docs explicitly reference briefing as startup step."
      ],
      "halt_conditions": [
        "Briefing output omits critical readiness/blocking context.",
        "Command introduces state mutations."
      ]
    },
    {
      "id": "UPG-046",
      "wbs_ref": "10.3",
      "area_id": "10.0",
      "title": "Implement governed handover and resume lifecycle",
      "scope": "Add handover and resume commands with invariants, ownership checks, atomic reassignment, and structured handover records in state.",
      "packet_id": "UPG-046",
      "wbs_refs": [
        "10.3"
      ],
      "purpose": "Introduce governed handover/resume lifecycle to preserve in-progress packet continuity across sessions without manual reconstruction.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "CRITICAL",
      "preconditions": [
        "UPG-044 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "src/governed_platform/governance/supervisor.py",
        "src/governed_platform/governance/migrations"
      ],
      "required_actions": [
        "Add handover command for in-progress packets capturing structured progress and remaining work.",
        "Add resume command with atomic ownership reassignment and invariant checks.",
        "Enforce invariants: single active handover, valid owner transitions, and lifecycle-safe logging."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "src/governed_platform/governance/supervisor.py",
        "tests/test_handover_lifecycle.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_handover_lifecycle.py passes.",
        "Resume fails without active handover and succeeds with valid handover record.",
        "Lifecycle log records handover/resume transitions with agent identities."
      ],
      "exit_criteria": [
        "Session-to-session continuity is governed and auditable for in-progress packets.",
        "Ownership transfer semantics are deterministic and test-covered."
      ],
      "halt_conditions": [
        "Multiple concurrent active handovers are possible for one packet.",
        "Resume path requires direct state file edits."
      ]
    },
    {
      "id": "UPG-047",
      "wbs_ref": "10.4",
      "area_id": "10.0",
      "title": "Implement packet context bundle with size controls",
      "scope": "Add context command returning packet definition, dependency state, packet log trail, handover chain, and file manifest with compact/limit controls.",
      "packet_id": "UPG-047",
      "wbs_refs": [
        "10.4"
      ],
      "purpose": "Provide a structured context bundle command so follow-on sessions can resume work with bounded, deterministic context payloads.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-046 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "docs/codex-migration/briefing-context-schema.md"
      ],
      "required_actions": [
        "Add context command exposing packet definition, dependency state, log trail, handover chain, and file manifest.",
        "Implement compact and limit flags (for example: max-events, max-notes-bytes) with deterministic truncation metadata.",
        "Ensure context output conforms to the versioned contract and remains read-only."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "tests/test_context_bundle.py",
        "docs/codex-migration/briefing-context-schema.md"
      ],
      "validation_checks": [
        "pytest -q tests/test_context_bundle.py passes.",
        "Context output includes required sections and truncation markers when limits are applied.",
        "Large packet histories can be rendered with bounded payload size."
      ],
      "exit_criteria": [
        "Context handoff consumers can reliably parse and resume from a single command output.",
        "Payload controls prevent context-window overflow in normal usage."
      ],
      "halt_conditions": [
        "Context command produces unbounded payloads without controllable limits."
      ]
    },
    {
      "id": "UPG-048",
      "wbs_ref": "10.5",
      "area_id": "10.0",
      "title": "Add agent capability profiles and claim enforcement modes",
      "scope": "Introduce agents registry and required_capabilities matching in claim path with advisory/strict/disabled modes.",
      "packet_id": "UPG-048",
      "wbs_refs": [
        "10.5"
      ],
      "purpose": "Add capability-aware packet assignment so claim behavior can warn or block mismatches based on declared agent competencies.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-044 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/supervisor.py",
        ".governance/packet-schema.json"
      ],
      "required_actions": [
        "Create agent registry file and capability taxonomy with stable tags.",
        "Extend packet schema with optional required_capabilities and enforce on claim path.",
        "Implement enforcement modes: advisory (warn), strict (block), disabled (no checks)."
      ],
      "required_outputs": [
        ".governance/agents.json",
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/supervisor.py",
        ".governance/packet-schema.json",
        "tests/test_agent_capabilities.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_agent_capabilities.py passes.",
        "Advisory mode warns but allows mismatched claims.",
        "Strict mode rejects mismatched claims with actionable error.",
        "Disabled mode preserves legacy claim behavior."
      ],
      "exit_criteria": [
        "Capability checks are deterministic and mode-controlled.",
        "Default behavior remains non-breaking for existing projects."
      ],
      "halt_conditions": [
        "Default mode blocks legacy workflows unexpectedly.",
        "Capability tags are undocumented or inconsistent."
      ]
    },
    {
      "id": "UPG-049",
      "wbs_ref": "10.6",
      "area_id": "10.0",
      "title": "Implement guided WBS planning mode",
      "scope": "Add interactive planner flow for project setup, work area decomposition, packet drafting, dependency mapping, validation, and export.",
      "packet_id": "UPG-049",
      "wbs_refs": [
        "10.6"
      ],
      "purpose": "Reduce WBS cold-start friction with an interactive planner that emits schema-compliant project definitions.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-044 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "templates/",
        "docs/DESIGNING_WBS.md"
      ],
      "required_actions": [
        "Add plan command workflow for project metadata, work areas, packets, dependencies, validation, and export.",
        "Implement planner module with deterministic prompts and output normalization.",
        "Ensure planner output passes WBS validate command without manual JSON editing."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        ".governance/planner.py",
        "tests/test_planner_mode.py",
        "docs/DESIGNING_WBS.md"
      ],
      "validation_checks": [
        "pytest -q tests/test_planner_mode.py passes.",
        "Planner-generated WBS file passes python3 .governance/wbs_cli.py validate.",
        "Dependency cycle detection surfaces actionable guidance during planning."
      ],
      "exit_criteria": [
        "Users can generate a runnable WBS through guided prompts in one flow.",
        "Planner output is machine-valid and governance-ready."
      ],
      "halt_conditions": [
        "Planner regularly emits invalid WBS definitions.",
        "Interactive flow cannot be completed non-interactively for tests."
      ]
    },
    {
      "id": "UPG-050",
      "wbs_ref": "10.7",
      "area_id": "10.0",
      "title": "Add markdown plan import to planner (experimental)",
      "scope": "Implement markdown-to-draft WBS import path with guarded parsing, explicit confidence markers, and manual correction loop.",
      "packet_id": "UPG-050",
      "wbs_refs": [
        "10.7"
      ],
      "purpose": "Provide an experimental markdown-to-WBS draft import path to accelerate planning from existing project documents.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "LOW",
      "preconditions": [
        "UPG-049 complete"
      ],
      "required_inputs": [
        ".governance/planner.py",
        "docs/DESIGNING_WBS.md"
      ],
      "required_actions": [
        "Add --import-markdown parser to produce draft packets, areas, and dependencies with explicit confidence markers.",
        "Flag ambiguous mappings for manual correction rather than silently guessing.",
        "Document import limitations and experimental status."
      ],
      "required_outputs": [
        ".governance/planner.py",
        "tests/test_planner_import_markdown.py",
        "docs/DESIGNING_WBS.md"
      ],
      "validation_checks": [
        "pytest -q tests/test_planner_import_markdown.py passes.",
        "Imported drafts include explicit uncertainty annotations for low-confidence mappings.",
        "Resulting draft can be corrected and exported to a valid WBS through planner flow."
      ],
      "exit_criteria": [
        "Markdown import is available behind explicit workflow and documented as experimental.",
        "No silent lossy transform behavior remains in importer path."
      ],
      "halt_conditions": [
        "Importer silently drops major scope sections or creates hidden dependencies."
      ]
    },
    {
      "id": "UPG-051",
      "wbs_ref": "10.8",
      "area_id": "10.0",
      "title": "Finalize rollout metrics and operational hardening docs",
      "scope": "Define phase KPIs, adoption telemetry signals, and operator rollout playbook for briefing, handover, planning, and capability profiles.",
      "packet_id": "UPG-051",
      "wbs_refs": [
        "10.8"
      ],
      "purpose": "Close the enhancement stream with measurable rollout metrics, operator playbooks, and release hardening criteria.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-045 complete",
        "UPG-047 complete",
        "UPG-048 complete",
        "UPG-049 complete",
        "UPG-050 complete"
      ],
      "required_inputs": [
        "docs/governance-workflow-codex.md",
        "docs/release-checklist-codex.md",
        "docs/codex-migration/briefing-context-schema.md"
      ],
      "required_actions": [
        "Define rollout KPI set (session bootstrap latency, handover continuity success, planning adoption, capability-check signal quality).",
        "Document operational runbook for enabling and validating each enhancement in production repositories.",
        "Add release hardening checklist entries tied to objective evidence commands."
      ],
      "required_outputs": [
        "docs/codex-migration/enhancement-rollout.md",
        "docs/governance-workflow-codex.md",
        "docs/release-checklist-codex.md"
      ],
      "validation_checks": [
        "Rollout doc contains metric definitions, targets, data collection method, and owner.",
        "Runbook includes copy-pasteable validation commands per enhancement.",
        "Residual risks and rollback steps are documented for all four enhancement streams."
      ],
      "exit_criteria": [
        "Enhancement rollout is measurable, operationally documented, and production-ready.",
        "Operators can evaluate success/failure with explicit evidence commands."
      ],
      "halt_conditions": [
        "Rollout lacks measurable KPIs or evidence-based go/no-go criteria."
      ]
    },
    {
      "id": "UPG-052",
      "wbs_ref": "11.1",
      "area_id": "11.0",
      "title": "Define Git-native governance model and compatibility contract",
      "scope": "Specify Git-native governance object model, commit linkage contract, operation modes, and non-git fallback behavior before implementation changes.",
      "packet_id": "UPG-052",
      "wbs_refs": [
        "11.1"
      ],
      "purpose": "Lock a deterministic contract for event-to-commit traceability and rollout semantics so implementation work does not drift.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-051 complete"
      ],
      "required_inputs": [
        "docs/architecture.md",
        "docs/governance-workflow-codex.md",
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py"
      ],
      "required_actions": [
        "Define Git-native lifecycle contract including event_id/commit linkage and commit protocol schema.",
        "Define governance modes (disabled/advisory/strict) for auto-commit and enforcement behavior.",
        "Document behavior when repository is detached or git worktree is unavailable."
      ],
      "required_outputs": [
        "docs/codex-migration/git-native-governance.md",
        "docs/architecture.md",
        "docs/governance-workflow-codex.md"
      ],
      "validation_checks": [
        "Contract doc includes explicit fields, invariants, and failure/rollback semantics.",
        "Mode definitions are unambiguous and machine-actionable for CLI implementation.",
        "No required contract field conflicts with existing runtime state/log schema."
      ],
      "exit_criteria": [
        "Implementation packets can proceed against one agreed Git-native contract.",
        "Fallback behavior is explicit for non-git and low-permission environments."
      ],
      "halt_conditions": [
        "Contract leaves commit linkage or failure semantics ambiguous."
      ]
    },
    {
      "id": "UPG-053",
      "wbs_ref": "11.2",
      "area_id": "11.0",
      "title": "Implement structured governance commit protocol",
      "scope": "Add commit message/trailer formatter and parser for governance transitions with deterministic schema and validation.",
      "packet_id": "UPG-053",
      "wbs_refs": [
        "11.2"
      ],
      "purpose": "Create a stable machine-readable commit protocol so governance history can be reconstructed from git commits.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-052 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/",
        "docs/codex-migration/git-native-governance.md"
      ],
      "required_actions": [
        "Implement protocol helper module for generating and parsing structured governance commit metadata.",
        "Support schema validation for required fields: packet, action, actor, event_id.",
        "Add CLI-visible documentation/examples for the commit protocol format."
      ],
      "required_outputs": [
        "src/governed_platform/governance/git_ledger.py",
        ".governance/wbs_cli.py",
        "tests/test_git_commit_protocol.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_git_commit_protocol.py passes.",
        "Parser rejects malformed or partial governance commit metadata.",
        "Formatter output is deterministic for equivalent transition input."
      ],
      "exit_criteria": [
        "Governance commit protocol is deterministic and test-covered.",
        "Protocol can be used by auto-commit and verification flows."
      ],
      "halt_conditions": [
        "Protocol cannot parse its own generated output reliably."
      ]
    },
    {
      "id": "UPG-054",
      "wbs_ref": "11.3",
      "area_id": "11.0",
      "title": "Implement optional auto-commit per lifecycle transition",
      "scope": "Add opt-in auto-commit mode for state-mutating lifecycle commands with safe staging rules, retries, and clear failure handling.",
      "packet_id": "UPG-054",
      "wbs_refs": [
        "11.3"
      ],
      "purpose": "Promote git history to active governance ledger while preserving backwards-compatible behavior when disabled.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-052 complete",
        "UPG-053 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "src/governed_platform/governance/git_ledger.py"
      ],
      "required_actions": [
        "Implement auto-commit setting and apply it to mutating commands (claim/done/note/fail/reset/handover/resume/closeout-l2).",
        "Stage only governance ledger files required by transition contract.",
        "Emit actionable error when commit fails and avoid silent state/commit divergence."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        ".governance/git-governance.json",
        "src/governed_platform/governance/git_ledger.py",
        "tests/test_git_auto_commit.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_git_auto_commit.py passes.",
        "Disabled mode preserves current behavior without requiring git commits.",
        "Auto-commit mode returns explicit failure when commit cannot be created."
      ],
      "exit_criteria": [
        "Git-native mode can auto-commit lifecycle transitions deterministically.",
        "Legacy non-git usage remains valid when mode is disabled."
      ],
      "halt_conditions": [
        "Auto-commit mode can mutate state without deterministic commit outcome."
      ]
    },
    {
      "id": "UPG-055",
      "wbs_ref": "11.4",
      "area_id": "11.0",
      "title": "Add event-to-commit linkage and ledger verification commands",
      "scope": "Attach git commit linkage to governance events and add CLI verification/export commands for end-to-end ledger integrity.",
      "packet_id": "UPG-055",
      "wbs_refs": [
        "11.4"
      ],
      "purpose": "Provide bidirectional traceability between governance transitions and code states.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "HIGH",
      "preconditions": [
        "UPG-054 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/engine.py",
        "src/governed_platform/governance/git_ledger.py",
        "docs/logging.md"
      ],
      "required_actions": [
        "Record commit hash/trailer linkage against relevant lifecycle log entries.",
        "Add CLI verification command to validate event-to-commit mapping and report gaps.",
        "Add export command for machine-readable governance ledger snapshots."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/git_ledger.py",
        "docs/logging.md",
        "tests/test_git_ledger_linkage.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_git_ledger_linkage.py passes.",
        "Verification command identifies missing or mismatched commit links with actionable detail.",
        "Export output is deterministic across repeated runs on unchanged history."
      ],
      "exit_criteria": [
        "Governance events can be traced to exact git commits programmatically.",
        "Operators can validate ledger completeness through one CLI command."
      ],
      "halt_conditions": [
        "Ledger verification cannot detect known linkage corruption scenarios."
      ]
    },
    {
      "id": "UPG-056",
      "wbs_ref": "11.5",
      "area_id": "11.0",
      "title": "Add branch-per-packet helper workflow (opt-in)",
      "scope": "Implement optional branch-per-packet helper commands/workflow with safe naming, ownership checks, and merge/cleanup guidance.",
      "packet_id": "UPG-056",
      "wbs_refs": [
        "11.5"
      ],
      "purpose": "Enable safer parallel execution while keeping governance transitions deterministic.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-054 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "docs/governance-workflow-codex.md",
        "src/governed_platform/governance/git_ledger.py"
      ],
      "required_actions": [
        "Define and implement branch naming convention for packet execution branches.",
        "Add helper command(s) for branch open/close and packet ownership consistency checks.",
        "Document conflict/merge handling and fallback path to single-branch execution."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "docs/governance-workflow-codex.md",
        "tests/test_git_branch_packet_flow.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_git_branch_packet_flow.py passes.",
        "Helper workflow prevents accidental branch mismatch for claimed packet owner.",
        "Workflow remains optional and does not block baseline single-branch operations."
      ],
      "exit_criteria": [
        "Packet-scoped branch flow is available and documented as opt-in.",
        "Operators can use branch helpers without bypassing lifecycle controls."
      ],
      "halt_conditions": [
        "Branch helper introduces mandatory behavior that breaks existing workflows."
      ]
    },
    {
      "id": "UPG-057",
      "wbs_ref": "11.6",
      "area_id": "11.0",
      "title": "Integrate Git-native governance checks into GitHub Actions",
      "scope": "Add CI workflows/checks that validate Git-native governance integrity, including commit protocol and ledger verification commands.",
      "packet_id": "UPG-057",
      "wbs_refs": [
        "11.6"
      ],
      "purpose": "Move Git-native governance from local convention to repository-enforced automation.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-054 complete",
        "UPG-055 complete"
      ],
      "required_inputs": [
        ".github/workflows/test.yml",
        ".governance/wbs_cli.py",
        "docs/release-checklist-codex.md"
      ],
      "required_actions": [
        "Add CI steps for governance commit protocol validation and ledger verification.",
        "Ensure CI behavior is deterministic across pull request and push contexts.",
        "Document required CI evidence in release checklist and operator docs."
      ],
      "required_outputs": [
        ".github/workflows/test.yml",
        "docs/release-checklist-codex.md",
        "tests/test_git_ci_governance.py"
      ],
      "validation_checks": [
        "CI config includes explicit Git-native governance validation steps.",
        "pytest -q tests/test_git_ci_governance.py passes.",
        "Checklist reflects required evidence commands and expected pass signals."
      ],
      "exit_criteria": [
        "Repository CI enforces Git-native governance integrity checks.",
        "Operators can diagnose CI failures from explicit governance error output."
      ],
      "halt_conditions": [
        "CI checks produce non-deterministic failures unrelated to governance state."
      ]
    },
    {
      "id": "UPG-058",
      "wbs_ref": "11.7",
      "area_id": "11.0",
      "title": "Add closeout tag snapshots and git-history reconstruction",
      "scope": "Tag closeout milestones and add tooling to reconstruct governance timeline from Git history and structured commit metadata.",
      "packet_id": "UPG-058",
      "wbs_refs": [
        "11.7"
      ],
      "purpose": "Provide immutable milestone checkpoints and disaster-recovery reconstruction path from git ledger alone.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-055 complete"
      ],
      "required_inputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/git_ledger.py",
        "docs/codex-migration/git-native-governance.md"
      ],
      "required_actions": [
        "Create closeout tag convention and emit tags during successful level-2 closeout flows.",
        "Implement reconstruction command to rebuild governance history from git commits.",
        "Document recovery procedure and expected limitations."
      ],
      "required_outputs": [
        ".governance/wbs_cli.py",
        "src/governed_platform/governance/git_ledger.py",
        "docs/codex-migration/git-native-governance.md",
        "tests/test_git_reconstruction.py"
      ],
      "validation_checks": [
        "pytest -q tests/test_git_reconstruction.py passes.",
        "Tag naming is deterministic and collision-safe for repeated closeout attempts.",
        "Reconstruction command can reproduce packet transition order from git history."
      ],
      "exit_criteria": [
        "Level-2 milestones can be recovered via immutable git tags.",
        "Governance history can be reconstructed from git without manual log edits."
      ],
      "halt_conditions": [
        "Reconstruction output diverges from known lifecycle history without clear explanation."
      ]
    },
    {
      "id": "UPG-059",
      "wbs_ref": "11.8",
      "area_id": "11.0",
      "title": "Finalize Git-native rollout hardening and migration docs",
      "scope": "Publish rollout KPI targets, migration sequencing, risk controls, and operator runbook for enabling Git-native governance in production repositories.",
      "packet_id": "UPG-059",
      "wbs_refs": [
        "11.8"
      ],
      "purpose": "Close Git-native governance stream with operationally safe adoption path and measurable readiness criteria.",
      "status": "PENDING",
      "owner": "codex",
      "priority": "MEDIUM",
      "preconditions": [
        "UPG-056 complete",
        "UPG-057 complete",
        "UPG-058 complete"
      ],
      "required_inputs": [
        "docs/codex-migration/enhancement-rollout.md",
        "docs/governance-workflow-codex.md",
        "docs/release-checklist-codex.md"
      ],
      "required_actions": [
        "Define Git-native rollout KPI set and acceptance thresholds.",
        "Document migration sequence from disabled to strict Git-native enforcement.",
        "Document rollback strategy and residual risks per mode."
      ],
      "required_outputs": [
        "docs/codex-migration/git-native-rollout.md",
        "docs/governance-workflow-codex.md",
        "docs/release-checklist-codex.md"
      ],
      "validation_checks": [
        "Rollout doc includes KPI definitions, target thresholds, and evidence commands.",
        "Migration plan includes explicit rollback points and ownership.",
        "Operational docs align with implemented CLI and CI behavior."
      ],
      "exit_criteria": [
        "Git-native governance rollout is measurable, reversible, and operator-ready.",
        "No unresolved contract mismatch remains between docs and implementation."
      ],
      "halt_conditions": [
        "Rollout guidance requires implicit tribal knowledge not captured in docs."
      ]
    }
  ],
  "dependencies": {
    "UPG-002": [
      "UPG-001"
    ],
    "UPG-003": [
      "UPG-001",
      "UPG-002"
    ],
    "UPG-008": [
      "UPG-003"
    ],
    "UPG-009": [
      "UPG-003"
    ],
    "UPG-010": [
      "UPG-003"
    ],
    "UPG-011": [
      "UPG-003"
    ],
    "UPG-012": [
      "UPG-003"
    ],
    "UPG-013": [
      "UPG-003"
    ],
    "UPG-014": [
      "UPG-003"
    ],
    "UPG-015": [
      "UPG-003"
    ],
    "UPG-019": [
      "UPG-018"
    ],
    "UPG-020": [
      "UPG-004",
      "UPG-005",
      "UPG-006",
      "UPG-007",
      "UPG-008",
      "UPG-009",
      "UPG-010",
      "UPG-011",
      "UPG-012",
      "UPG-013",
      "UPG-014",
      "UPG-015",
      "UPG-016",
      "UPG-017",
      "UPG-019"
    ],
    "UPG-022": [
      "UPG-021"
    ],
    "UPG-023": [
      "UPG-022"
    ],
    "UPG-024": [
      "UPG-021"
    ],
    "UPG-025": [
      "UPG-022",
      "UPG-024"
    ],
    "UPG-026": [
      "UPG-024",
      "UPG-025"
    ],
    "UPG-027": [
      "UPG-025"
    ],
    "UPG-028": [
      "UPG-023",
      "UPG-026"
    ],
    "UPG-029": [
      "UPG-027",
      "UPG-028"
    ],
    "UPG-031": [
      "UPG-025"
    ],
    "UPG-032": [
      "UPG-027"
    ],
    "UPG-033": [
      "UPG-022"
    ],
    "UPG-035": [
      "UPG-034"
    ],
    "UPG-036": [
      "UPG-035"
    ],
    "UPG-037": [
      "UPG-036"
    ],
    "UPG-039": [
      "UPG-038"
    ],
    "UPG-040": [
      "UPG-038"
    ],
    "UPG-041": [
      "UPG-038"
    ],
    "UPG-042": [
      "UPG-041"
    ],
    "UPG-043": [
      "UPG-040"
    ],
    "UPG-045": [
      "UPG-044"
    ],
    "UPG-046": [
      "UPG-044"
    ],
    "UPG-047": [
      "UPG-046"
    ],
    "UPG-048": [
      "UPG-044"
    ],
    "UPG-049": [
      "UPG-044"
    ],
    "UPG-050": [
      "UPG-049"
    ],
    "UPG-051": [
      "UPG-045",
      "UPG-047",
      "UPG-048",
      "UPG-049",
      "UPG-050"
    ],
    "UPG-052": [
      "UPG-051"
    ],
    "UPG-053": [
      "UPG-052"
    ],
    "UPG-054": [
      "UPG-052",
      "UPG-053"
    ],
    "UPG-055": [
      "UPG-054"
    ],
    "UPG-056": [
      "UPG-054"
    ],
    "UPG-057": [
      "UPG-054",
      "UPG-055"
    ],
    "UPG-058": [
      "UPG-055"
    ],
    "UPG-059": [
      "UPG-056",
      "UPG-057",
      "UPG-058"
    ]
  }
}
