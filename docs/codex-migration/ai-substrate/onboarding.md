# AI Substrate Onboarding Bundle

## Quick start commands
1. `npm install` from `templates/ai-substrate`, then `npx prisma generate`.
2. `npm run schema:push` (or `npm run test` which covers lint + typecheck) to ensure the template compiles.
3. `scripts/preflight-checks.sh` for the full gate sequence (lint/typecheck/test/schema push).
4. Run `scripts/run-ai-eval.py` to capture the current agent evaluation results.
5. Use `scripts/ai-eval-publish.js` to copy the latest report into `docs/codex-migration/ai-substrate/eval-history` before publishing.

## Authority files
- `docs/codex-migration/ai-substrate/typed-context-index.json` (auto-generated by `scripts/typed-context-refresh.js`; see config in `typed-context-config.json`).
- `docs/codex-migration/ai-substrate/contract-changelog.md` (append-only audit log for schema/env/policy changes via `scripts/contract-log-entry.sh`). Run the script whenever you modify `prisma`, `env.ts`, or policy helpers so every ontological shift is recorded.
- `docs/codex-migration/ai-substrate/quality-gates.md` and `release-readiness.md` (describe guardrails/deployment status).

## Agent prompt guidance
- Feed agents `typed-context-index.json` plus `docs/codex-migration/ai-substrate/onboarding.md` to show the minimal surfaces to edit.
- Encourage them to run `scripts/typed-context-refresh.js` after touching any file in the typed bundle so the index stays accurate.
- For policy/schema changes, run `scripts/contract-log-entry.sh "<summary>" <file>...` to record the effect before submitting.
- After CI passes, run `scripts/ai-eval-publish.js` to ship the evaluation snapshot along with the release bundle.
